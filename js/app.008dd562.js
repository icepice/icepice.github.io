(function(e){function t(t){for(var n,a,o=t[0],c=t[1],l=t[2],d=0,u=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&u.push(i[a][0]),i[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);h&&h(t);while(u.length)u.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],n=!0,o=1;o<s.length;o++){var c=s[o];0!==i[c]&&(n=!1)}n&&(r.splice(t--,1),e=a(a.s=s[0]))}return e}var n={},i={app:0},r=[];function a(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=n,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(s,n,function(t){return e[t]}.bind(null,n));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var h=c;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"13ee":function(e,t,s){"use strict";var n=s("906c"),i=s.n(n);i.a},"1c5c":function(e,t,s){},"4b23":function(e,t,s){"use strict";var n=s("8eb9"),i=s.n(n);i.a},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("chessboard")],1)},r=[],a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chessboard"},[s("div",{staticClass:"title"},[e._v("-- 五子棋 "+e._s(e.verson)+" --")]),s("div",{staticClass:"tips"},[e._v(e._s(e.tips))]),s("div",{staticClass:"content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isCanvas,expression:"isCanvas"}]},[s("canvas-verson",{ref:"canvasVer",attrs:{chessboardStyle:e.chessboardStyle,chessmanStyle:e.chessmanStyle,gameOver:e.gameOver},on:{listenDropChessman:e.listenDropChessman}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCanvas,expression:"!isCanvas"}]},[s("dom-verson",{ref:"domVer",attrs:{chessboardStyle:e.chessboardStyle,chessmanStyle:e.chessmanStyle,gameOver:e.gameOver},on:{listenDropChessman:e.listenDropChessman}})],1),s("div",{staticClass:"aside"},[s("div",{on:{click:e.reStart}},[e._v("重新开始")]),s("div",{attrs:{disabled:""},on:{click:e.unDo}},[e._v("悔棋")]),s("div",{on:{click:e.cancelUndo}},[e._v("撤销悔棋")]),s("div",{on:{click:e.toggleVer}},[e._v("切换版本")])])])])},o=[],c=(s("4160"),s("d81d"),s("45fc"),s("159b"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"dom_verson",staticClass:"dom_verson"},[s("div",{ref:"temp_horizontal_line",staticClass:"horizontal_line",staticStyle:{display:"none"}}),s("div",{ref:"temp_vertical_line",staticClass:"vertical_line",staticStyle:{display:"none"}}),s("div",{ref:"lineList"}),s("div",{ref:"temp_chessman",staticClass:"chessman",staticStyle:{display:"none"}}),s("div",{ref:"chessmanList"}),s("div",{ref:"mask",staticClass:"mask",on:{click:function(t){!e.gameOver&&e.listenDropChessman(t)}}})])}),l=[],h={name:"DomVerson",props:{chessboardStyle:{type:Object,required:!0},chessmanStyle:{type:Object,required:!0},gameOver:{type:Boolean,required:!0}},data:function(){return{}},methods:{drawChessboard:function(){var e=this.chessboardStyle,t=e.count,s=e.padding,n=e.color,i=this.$refs.dom_verson,r=this.$refs.mask,a=this.$refs.temp_horizontal_line,o=this.$refs.temp_vertical_line;r.style.width=(t+1)*s+"px",r.style.height=(t+1)*s+"px",r.style.top="0px",r.style.left="0px",i.style.padding=s+"px",i.style.width=(t-1)*s+"px",i.style.height=(t-1)*s+"px";for(var c=0;c<t;c++){var l=a.cloneNode();l.style.width=(t-1)*s+"px",l.style.top=(c+1)*s+"px",l.style.left=s+"px",l.style.borderTop="1px ".concat(n," solid"),l.style.display="inline-block",this.$refs.lineList.appendChild(l)}for(var h=0;h<t;h++){var d=o.cloneNode();d.style.height=(t-1)*s+"px",d.style.top=s+"px",d.style.left=(h+1)*s+"px",d.style.borderLeft="1px ".concat(n," solid"),d.style.display="inline-block",this.$refs.lineList.appendChild(d)}},drawChessman:function(e,t,s){var n=this.chessboardStyle.padding,i=this.chessmanStyle,r=i.radius,a=i.blackColor,o=i.whiteColor,c=this.$refs.temp_chessman.cloneNode();return c.style.width=2*r+"px",c.style.height=2*r+"px",c.style.left=(e+1)*n-r+"px",c.style.top=(t+1)*n-r+"px",c.style.backgroundColor="blackColor"===s?a:o,c.style.display="inline-block",this.$refs.chessmanList.appendChild(c),{x:e,y:t,dom:c}},listenDropChessman:function(e){this.$emit("listenDropChessman",e,this.drawChessman)},reset:function(){this.$refs.chessmanList.innerHTML=""},unDo:function(e){this.$refs.chessmanList.removeChild(e.dom)}},mounted:function(){this.drawChessboard()}},d=h,u=(s("4b23"),s("2877")),p=Object(u["a"])(d,c,l,!1,null,"08b8ed7c",null),v=p.exports,f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"canvas_verson"},[s("canvas",{ref:"canvas",on:{click:function(t){!e.gameOver&&e.listenDropChessman(t)}}},[s("p",[e._v("您的浏览器版本过低，请升级您的浏览器")])])])},m=[],y=(s("cb29"),{name:"CanvasVerson",props:{chessboardStyle:{type:Object,required:!0},chessmanStyle:{type:Object,required:!0},gameOver:{type:Boolean,required:!0}},data:function(){return{canvas:null,ctx:null}},computed:{},methods:{initCanvas:function(){this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d")},drawLine:function(e,t,s){e.moveTo(t.x+.5,t.y+.5),e.lineTo(s.x+.5,s.y+.5)},drawChessboard:function(){var e=this.chessboardStyle,t=e.count,s=e.padding,n=e.color,i=this.canvas,r=this.ctx;i.width=i.height=s*(t+1),r.save(),r.strokeStyle=n,r.beginPath();for(var a=0;a<t;a++){var o=a+1;this.drawLine(r,{x:o*s,y:s},{x:o*s,y:t*s}),this.drawLine(r,{x:s,y:o*s},{x:t*s,y:o*s})}r.stroke(),r.restore()},drawChessman:function(e,t,s){var n=this.ctx,i=this.chessboardStyle.padding,r=this.chessmanStyle,a=r.radius,o=r.whiteColor,c=r.blackColor;return n.save(),n.fillStyle="blackColor"===s?c:o,n.beginPath(),n.arc((e+1)*i+.5,(t+1)*i+.5,a,0,2*Math.PI),n.stroke(),n.fill(),n.restore(),{x:e,y:t}},listenDropChessman:function(e){this.$emit("listenDropChessman",e,this.drawChessman)},reset:function(){var e=this.canvas,t=this.ctx;t.clearRect(0,0,e.width,e.height),this.drawChessboard()},unDo:function(e){var t=this.chessboardStyle,s=t.count,n=t.padding,i=t.color,r=this.ctx,a=e.x,o=e.y,c=(a+1)*n,l=(o+1)*n;r.clearRect((a+.5)*n+.5,(o+.5)*n+.5,n,n),r.save(),r.strokeStyle=i,r.beginPath(),0!==o&&this.drawLine(r,{x:c,y:l},{x:c,y:l-.6*n}),o!==s-1&&this.drawLine(r,{x:c,y:l},{x:c,y:l+.6*n}),0!==a&&this.drawLine(r,{x:c,y:l},{x:c-.6*n,y:l}),a!==s-1&&this.drawLine(r,{x:c,y:l},{x:c+.6*n,y:l}),r.stroke(),r.restore()}},mounted:function(){this.initCanvas(),this.drawChessboard()}}),b=y,C=(s("99e6"),Object(u["a"])(b,f,m,!1,null,"236efb84",null)),x=C.exports,g={name:"Chessboard",components:{DomVerson:v,CanvasVerson:x},data:function(){return{chessboardStyle:{count:16,padding:40,color:"#333"},chessboardMatrix:[],isBlack:!0,tips:"黑方的回合",preStep:null,canUndo:!1,gameOver:!1,isCanvas:!1}},watch:{isBlack:function(e){this.tips=!0===e?"黑方的回合":"白方的回合"}},computed:{verson:function(){return this.isCanvas?"Canvas版":"Dom版"},chessmanStyle:function(){return{radius:.4*this.chessboardStyle.padding,blackColor:"#000",whiteColor:"#E3E3E3"}}},methods:{initChessboardMatrix:function(){for(var e=this.chessboardStyle.count,t=this.chessboardMatrix,s=0;s<e;s++){t[s]=[];for(var n=0;n<e;n++)t[s][n]=0}},listenDropChessman:function(e,t){var s=this.isBlack,n=this.chessboardStyle,i=n.padding,r=n.count,a=e.offsetX,o=e.offsetY;if(a=Math.round(a/i)-1,o=Math.round(o/i)-1,a+1!==0&&a!==r&&o+1!==0&&o!==r&&0==this.chessboardMatrix[a][o]){if(this.preStep=t(a,o,s?"blackColor":"whiteColor"),this.chessboardMatrix[a][o]=this.isBlack?1:2,this.isWin(a,o)>0)return this.tips=this.isBlack?"！！！ 黑方获胜 ！！！":"！！！ 白方获胜 ！！！",void(this.gameOver=!0);this.canUndo=!0,this.isBlack=!this.isBlack}},isWin:function(e,t){var s=this.chessboardMatrix,n=(this.chessboardStyle.count,s.map((function(e){return e[t]}))),i=s[e],r=[],a=[],o=0;return s.forEach((function(s,n){var i=s[t-(e-n)];void 0!==i&&r.push(i);var o=s[t+(e-n)];void 0!==o&&a.push(o)})),[n,i,r,a].forEach((function(e){var t=e.some((function(t,s){if(0!==t&&e[s+1]===t&&e[s+2]===t&&e[s+3]===t&&e[s+4]===t)return!0}));t&&o++})),o},reStart:function(){var e=this.isCanvas?"canvasVer":"domVer";this.$refs[e].reset(),this.initChessboardMatrix(),this.isBlack=!0,this.preStep=null,this.gameOver=!1,this.tips="黑方的回合"},unDo:function(){var e=this.preStep,t=this.chessboardMatrix,s=this.canUndo,n=this.gameOver,i=this.chessboardStyle,r=(i.count,i.padding,i.color,this.preStep),a=r.x,o=r.y,c=this.isCanvas?"canvasVer":"domVer";e&&(n||s&&(t[a][o]=0,this.isBlack=!this.isBlack,this.canUndo=!1,this.$refs[c].unDo(e)))},cancelUndo:function(){var e=this.chessboardMatrix,t=this.isBlack,s=this.gameOver,n=this.canUndo,i=this.preStep,r=this.preStep,a=r.x,o=r.y,c=this.isCanvas?"canvasVer":"domVer";i&&(s||n||(this.canUndo=!0,this.preStep=this.$refs[c].drawChessman(a,o,t?"blackColor":"whiteColor"),this.isBlack=!this.isBlack,e[a][o]=t?1:2))},toggleVer:function(){this.reStart(),this.isCanvas=!this.isCanvas}},created:function(){this.initChessboardMatrix()},mounted:function(){}},S=g,w=(s("13ee"),Object(u["a"])(S,a,o,!1,null,null,null)),k=w.exports,_={name:"App",components:{Chessboard:k},data:function(){return{name:"test"}}},O=_,$=Object(u["a"])(O,i,r,!1,null,null,null),D=$.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(D)}}).$mount("#app")},"8eb9":function(e,t,s){},"906c":function(e,t,s){},"99e6":function(e,t,s){"use strict";var n=s("1c5c"),i=s.n(n);i.a}});
//# sourceMappingURL=app.008dd562.js.map