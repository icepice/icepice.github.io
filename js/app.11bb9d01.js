(function(s){function t(t){for(var n,r,o=t[0],c=t[1],h=t[2],d=0,u=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&u.push(a[r][0]),a[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(s[n]=c[n]);l&&l(t);while(u.length)u.shift()();return i.push.apply(i,h||[]),e()}function e(){for(var s,t=0;t<i.length;t++){for(var e=i[t],n=!0,o=1;o<e.length;o++){var c=e[o];0!==a[c]&&(n=!1)}n&&(i.splice(t--,1),s=r(r.s=e[0]))}return s}var n={},a={app:0},i=[];function r(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return s[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=s,r.c=n,r.d=function(s,t,e){r.o(s,t)||Object.defineProperty(s,t,{enumerable:!0,get:e})},r.r=function(s){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,t){if(1&t&&(s=r(s)),8&t)return s;if(4&t&&"object"===typeof s&&s&&s.__esModule)return s;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:s}),2&t&&"string"!=typeof s)for(var n in s)r.d(e,n,function(t){return s[t]}.bind(null,n));return e},r.n=function(s){var t=s&&s.__esModule?function(){return s["default"]}:function(){return s};return r.d(t,"a",t),t},r.o=function(s,t){return Object.prototype.hasOwnProperty.call(s,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var h=0;h<o.length;h++)t(o[h]);var l=c;i.push([0,"chunk-vendors"]),e()})({0:function(s,t,e){s.exports=e("56d7")},"09f6":function(s,t,e){},"13ee":function(s,t,e){"use strict";var n=e("906c"),a=e.n(n);a.a},"2f65":function(s,t,e){},"56d7":function(s,t,e){"use strict";e.r(t);e("e260"),e("e6cf"),e("cca6"),e("a79d");var n=e("2b0e"),a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{attrs:{id:"app"}},[e("chessboard")],1)},i=[],r=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"chessboard"},[e("div",{staticClass:"title"},[s._v("-- 五子棋 "+s._s(s.verson)+" --")]),e("div",{staticClass:"tips"},[s._v(s._s(s.tips))]),e("div",{staticClass:"content"},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.isCanvas,expression:"isCanvas"}]},[e("canvas-verson",{ref:"canvasVer",attrs:{chessboardStyle:s.chessboardStyle,chessmanStyle:s.chessmanStyle,gameOver:s.gameOver},on:{listenDropChessman:s.listenDropChessman}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:!s.isCanvas,expression:"!isCanvas"}]},[e("dom-verson",{ref:"domVer",attrs:{chessboardStyle:s.chessboardStyle,chessmanStyle:s.chessmanStyle,gameOver:s.gameOver},on:{listenDropChessman:s.listenDropChessman}})],1),e("div",{staticClass:"aside"},[e("div",{on:{click:s.reStart}},[s._v("重新开始")]),e("div",{attrs:{disabled:""},on:{click:s.unDo}},[s._v("悔棋")]),e("div",{on:{click:s.cancelUndo}},[s._v("撤销悔棋")]),e("div",{on:{click:s.toggleVer}},[s._v("切换版本")])])])])},o=[],c=(e("4160"),e("d81d"),e("45fc"),e("159b"),function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"dom_verson",style:s.domVersonStyle},[s._l(s.horizontalList,(function(s){return e("div",{key:s.id,staticClass:"horizontal_line",style:s.style})})),s._l(s.verticalList,(function(s){return e("div",{key:s.id,staticClass:"vertical_line",style:s.style})})),e("div",{staticClass:"chessmanList"},s._l(s.chessmanList,(function(s){return e("div",{key:s.id,staticClass:"chessman",style:s.style})})),0),e("div",{staticClass:"mask",style:s.maskStyle,on:{click:function(t){!s.gameOver&&s.listenDropChessman(t)}}})],2)}),h=[],l=(e("99af"),{name:"DomVerson",props:{chessboardStyle:{type:Object,required:!0},chessmanStyle:{type:Object,required:!0},gameOver:{type:Boolean,required:!0}},data:function(){return{domVersonStyle:null,maskStyle:null,horizontalList:[],verticalList:[],chessmanList:[]}},methods:{drawChessboard:function(){var s=this.chessboardStyle,t=s.count,e=s.padding,n=s.color;this.domVersonStyle={width:(t+1)*e+"px",height:(t+1)*e+"px"},this.maskStyle={width:(t+1)*e+"px",height:(t+1)*e+"px",top:0,left:0};for(var a=0;a<t;a++)this.horizontalList.push({id:"hor_".concat(a),style:{width:(t-1)*e+"px",top:(a+1)*e+"px",left:e+"px",borderTop:"1px ".concat(n," solid")}}),this.verticalList.push({id:"ver_".concat(a),style:{height:(t-1)*e+"px",top:e+"px",left:(a+1)*e+"px",borderLeft:"1px ".concat(n," solid")}})},drawChessman:function(s,t,e){console.log(this);var n=this.chessboardStyle.padding,a=this.chessmanStyle,i=a.radius,r=a.blackColor,o=a.whiteColor;return this.chessmanList.push({id:"".concat(s,"_").concat(t),style:{width:2*i+"px",height:2*i+"px",left:(s+1)*n-i+"px",top:(t+1)*n-i+"px",backgroundColor:"blackColor"===e?r:o}}),{x:s,y:t}},listenDropChessman:function(s){this.$emit("listenDropChessman",s,this.drawChessman)},reset:function(){this.chessmanList=[]},unDo:function(s){this.chessmanList.pop()}},created:function(){this.drawChessboard()}}),d=l,u=(e("be6c"),e("2877")),v=Object(u["a"])(d,c,h,!1,null,"59d6eb24",null),p=v.exports,f=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"canvas_wrap",style:s.wrapStyle},[e("canvas",{directives:[{name:"show",rawName:"v-show",value:!s.loading,expression:"!loading"}],ref:"linesCanvas",staticClass:"canvas"},[e("p",[s._v("您的浏览器版本过低，请升级您的浏览器")])]),e("canvas",{directives:[{name:"show",rawName:"v-show",value:!s.loading,expression:"!loading"}],ref:"chessmanCanvas",staticClass:"canvas",on:{click:function(t){!s.gameOver&&s.listenDropChessman(t)}}})])},m=[],C=(e("cb29"),{name:"CanvasVerson",props:{chessboardStyle:{type:Object,required:!0},chessmanStyle:{type:Object,required:!0},gameOver:{type:Boolean,required:!0}},data:function(){return{wrapStyle:null,linesCanvas:null,linesCtx:null,chessmanCanvas:null,chessmanCtx:null,loading:!0}},methods:{initCanWrpa:function(){var s=this.chessboardStyle,t=s.count,e=s.padding;this.wrapStyle={width:e*(t+1)+"px",height:e*(t+1)+"px"}},initCanvas:function(){var s=this.chessboardStyle,t=s.count,e=s.padding;this.linesCanvas=this.$refs.linesCanvas,this.linesCtx=this.linesCanvas.getContext("2d"),this.chessmanCanvas=this.$refs.chessmanCanvas,this.chessmanCtx=this.chessmanCanvas.getContext("2d"),this.linesCanvas.width=this.linesCanvas.height=this.chessmanCanvas.width=this.chessmanCanvas.height=e*(t+1)},drawLine:function(s,t,e){s.moveTo(t.x+.5,t.y+.5),s.lineTo(e.x+.5,e.y+.5)},drawChessboard:function(){var s=this.chessboardStyle,t=s.count,e=s.padding,n=s.color,a=this.linesCtx;a.save(),a.strokeStyle=n,a.beginPath();for(var i=0;i<t;i++){var r=i+1;this.drawLine(a,{x:r*e,y:e},{x:r*e,y:t*e}),this.drawLine(a,{x:e,y:r*e},{x:t*e,y:r*e})}a.stroke(),a.restore()},drawChessman:function(s,t,e){var n=this.chessmanCtx,a=this.chessboardStyle.padding,i=this.chessmanStyle,r=i.radius,o=i.whiteColor,c=i.blackColor;return n.save(),n.fillStyle="blackColor"===e?c:o,n.beginPath(),n.arc((s+1)*a+.5,(t+1)*a+.5,r,0,2*Math.PI),n.stroke(),n.fill(),n.restore(),{x:s,y:t}},listenDropChessman:function(s){this.$emit("listenDropChessman",s,this.drawChessman)},reset:function(){var s=this.chessmanCanvas;s.width=s.width},unDo:function(s){var t=this.chessboardStyle,e=(t.count,t.padding),n=(t.color,this.chessmanCtx),a=s.x,i=s.y;n.clearRect((a+.5)*e+.5,(i+.5)*e+.5,e,e)}},created:function(){this.initCanWrpa()},mounted:function(){this.initCanvas(),this.drawChessboard(),this.loading=!1}}),y=C,b=(e("c697"),Object(u["a"])(y,f,m,!1,null,"32307a36",null)),x=b.exports,g={name:"Chessboard",components:{DomVerson:p,CanvasVerson:x},data:function(){return{chessboardStyle:{count:16,padding:40,color:"#333"},chessboardMatrix:[],isBlack:!0,tips:"黑方的回合",preStep:null,canUndo:!1,gameOver:!1,isCanvas:!1}},watch:{isBlack:function(s){this.tips=!0===s?"黑方的回合":"白方的回合"}},computed:{verson:function(){return this.isCanvas?"Canvas版":"Dom版"},chessmanStyle:function(){return{radius:.4*this.chessboardStyle.padding,blackColor:"#000",whiteColor:"#E3E3E3"}}},methods:{initChessboardMatrix:function(){for(var s=this.chessboardStyle.count,t=this.chessboardMatrix,e=0;e<s;e++){t[e]=[];for(var n=0;n<s;n++)t[e][n]=0}},listenDropChessman:function(s,t){var e=this.isBlack,n=this.chessboardStyle,a=n.padding,i=n.count,r=s.offsetX,o=s.offsetY;if(r=Math.round(r/a)-1,o=Math.round(o/a)-1,r+1!==0&&r!==i&&o+1!==0&&o!==i&&0==this.chessboardMatrix[r][o]){if(this.preStep=t(r,o,e?"blackColor":"whiteColor"),this.chessboardMatrix[r][o]=e?1:2,this.isWin(r,o)>0)return this.tips=e?"！！！ 黑方获胜 ！！！":"！！！ 白方获胜 ！！！",void(this.gameOver=!0);this.canUndo=!0,this.isBlack=!e}},isWin:function(s,t){var e=this.chessboardMatrix,n=(this.chessboardStyle.count,e.map((function(s){return s[t]}))),a=e[s],i=[],r=[],o=0;return e.forEach((function(e,n){var a=e[t-(s-n)];void 0!==a&&i.push(a);var o=e[t+(s-n)];void 0!==o&&r.push(o)})),[n,a,i,r].forEach((function(s){var t=s.some((function(t,e){if(0!==t&&s[e+1]===t&&s[e+2]===t&&s[e+3]===t&&s[e+4]===t)return!0}));t&&o++})),o},reStart:function(){var s=this.isCanvas?"canvasVer":"domVer";this.$refs[s].reset(),this.initChessboardMatrix(),this.isBlack=!0,this.preStep=null,this.gameOver=!1,this.tips="黑方的回合"},unDo:function(){if(this.preStep){var s=this.preStep,t=this.chessboardMatrix,e=this.canUndo,n=this.gameOver,a=this.chessboardStyle,i=(a.count,a.padding,a.color,this.preStep),r=i.x,o=i.y,c=this.isCanvas?"canvasVer":"domVer";n||e&&(t[r][o]=0,this.isBlack=!this.isBlack,this.canUndo=!1,this.$refs[c].unDo(s))}},cancelUndo:function(){if(this.preStep){var s=this.chessboardMatrix,t=this.isBlack,e=this.gameOver,n=this.canUndo,a=(this.preStep,this.preStep),i=a.x,r=a.y,o=this.isCanvas?"canvasVer":"domVer";e||n||(this.canUndo=!0,this.preStep=this.$refs[o].drawChessman(i,r,t?"blackColor":"whiteColor"),this.isBlack=!this.isBlack,s[i][r]=t?1:2)}},toggleVer:function(){this.reStart(),this.isCanvas=!this.isCanvas}},created:function(){this.initChessboardMatrix()}},S=g,w=(e("13ee"),Object(u["a"])(S,r,o,!1,null,null,null)),k=w.exports,_={name:"App",components:{Chessboard:k},data:function(){return{name:"test"}}},O=_,D=Object(u["a"])(O,a,i,!1,null,null,null),j=D.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(s){return s(j)}}).$mount("#app")},"906c":function(s,t,e){},be6c:function(s,t,e){"use strict";var n=e("09f6"),a=e.n(n);a.a},c697:function(s,t,e){"use strict";var n=e("2f65"),a=e.n(n);a.a}});
//# sourceMappingURL=app.11bb9d01.js.map