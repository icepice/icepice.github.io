(function(t){function e(e){for(var s,a,o=e[0],c=e[1],h=e[2],d=0,u=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&u.push(i[a][0]),i[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(u.length)u.shift()();return r.push.apply(r,h||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(s=!1)}s&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var s={},i={app:0},r=[];function a(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=s,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(n,s,function(e){return t[e]}.bind(null,s));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var h=0;h<o.length;h++)e(o[h]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0ce2":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("chess-board")],1)},r=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chessBoard"},[n("div",{staticClass:"title"},[t._v("-- 五子棋 --")]),n("div",{staticClass:"tips"},[t._v(t._s(t.tips))]),n("div",{staticClass:"content"},[n("canvas",{ref:"chessBoard"},[n("p",[t._v("您的浏览器版本过低，请升级您的浏览器")])]),n("div",{staticClass:"aside"},[n("div",{on:{click:t.reStart}},[t._v("重新开始")]),n("div",{attrs:{disabled:""},on:{click:t.unDo}},[t._v("悔棋")]),n("div",{on:{click:t.cancelUndo}},[t._v("撤销悔棋")])])])])},o=[],c=(n("cb29"),n("4160"),n("d81d"),n("45fc"),n("159b"),{name:"ChessBoard",data:function(){return{canvas:null,ctx:null,chessBoardStyle:{count:16,padding:40,color:"#333"},chessBoardMatrix:[],isBlack:!0,tips:"黑方的回合",preStep:null,gameOver:!1}},watch:{isBlack:function(t){this.tips=!0===t?"黑方的回合":"白方的回合"}},methods:{initCanvas:function(){this.canvas=this.$refs.chessBoard,this.ctx=this.canvas.getContext("2d"),this.drawChessBoard()},drawLine:function(t,e,n){t.moveTo(e.x+.5,e.y+.5),t.lineTo(n.x+.5,n.y+.5)},drawChessBoard:function(){var t=this.canvas,e=this.ctx,n=this.chessBoardStyle,s=n.count,i=n.padding,r=n.color;t.width=t.height=i*(s+1),e.save(),e.strokeStyle=r,e.beginPath();for(var a=0;a<s;a++){var o=a+1;this.drawLine(e,{x:o*i,y:i},{x:o*i,y:s*i}),this.drawLine(e,{x:i,y:o*i},{x:s*i,y:o*i}),e.stroke()}e.restore()},initChessboardMatrix:function(){for(var t=this.chessBoardStyle.count,e=this.chessBoardMatrix,n=0;n<t;n++){e[n]=[];for(var s=0;s<t;s++)e[n][s]=0}},drawChessman:function(t,e){var n=this.ctx,s=this.chessBoardStyle.padding;n.save(),n.fillStyle=this.isBlack?"#000":"#E3E3E3",n.beginPath(),n.arc(t+.5,e+.5,.4*s,0,2*Math.PI),n.stroke(),n.fill(),n.restore()},listenDropChessman:function(){var t=this,e=this.canvas,n=this.chessBoardStyle,s=n.padding,i=n.count;e.onclick=function(n){var r=n.offsetX,a=n.offsetY;if(r=Math.round(r/s)-1,a=Math.round(a/s)-1,r+1!==0&&r!==i&&a+1!==0&&a!==i&&0==t.chessBoardMatrix[r][a]){if(t.drawChessman((r+1)*s,(a+1)*s),t.chessBoardMatrix[r][a]=t.isBlack?1:2,t.isWin(r,a)>0)return t.tips=t.isBlack?"！！！ 黑方获胜 ！！！":"！！！ 白方获胜 ！！！",e.onclick=null,void(t.gameOver=!0);t.preStep={x:r,y:a,isBlack:t.isBlack,canUndo:!0},t.isBlack=!t.isBlack}}},isWin:function(t,e){var n=this.chessBoardMatrix,s=(this.chessBoardStyle.count,n.map((function(t){return t[e]}))),i=n[t],r=[],a=[],o=0;return n.forEach((function(n,s){var i=n[e-(t-s)];void 0!==i&&r.push(i);var o=n[e+(t-s)];void 0!==o&&a.push(o)})),[s,i,r,a].forEach((function(t){var e=t.some((function(e,n){if(0!==e&&t[n+1]===e&&t[n+2]===e&&t[n+3]===e&&t[n+4]===e)return!0}));e&&o++})),o},reStart:function(){var t=this.canvas,e=this.ctx;e.clearRect(0,0,t.width,t.height),this.drawChessBoard(),this.initChessboardMatrix(),this.listenDropChessman(),this.isBlack=!0,this.preStep=null,this.gameOver=!1,this.tips="黑方的回合"},unDo:function(){if(this.preStep&&!this.gameOver){var t=this.ctx,e=this.chessBoardMatrix,n=this.preStep,s=n.x,i=n.y,r=n.canUndo,a=this.chessBoardStyle,o=a.padding,c=a.color,h=(s+1)*o,l=(i+1)*o;r&&(t.clearRect((s+.5)*o+.5,(i+.5)*o+.5,o,o),e[s][i]=0,this.isBlack=!this.isBlack,this.preStep.canUndo=!1,t.save(),t.strokeStyle=c,t.beginPath(),this.drawLine(t,{x:h,y:l},{x:h,y:l-.6*o}),this.drawLine(t,{x:h,y:l},{x:h,y:l+.6*o}),this.drawLine(t,{x:h,y:l},{x:h-.6*o,y:l}),this.drawLine(t,{x:h,y:l},{x:h+.6*o,y:l}),t.stroke(),t.restore())}},cancelUndo:function(){if(this.preStep&&!this.gameOver){var t=this.preStep,e=t.x,n=t.y,s=t.isBlack,i=(t.canCancelUndo,t.canUndo),r=(this.ctx,this.chessBoardMatrix),a=this.chessBoardStyle.padding;i||(this.preStep.canUndo=!0,this.drawChessman((e+1)*a,(n+1)*a),this.isBlack=!this.isBlack,r[e][n]=s?1:2)}}},created:function(){this.initChessboardMatrix()},mounted:function(){this.initCanvas(),this.listenDropChessman()}}),h=c,l=(n("ff13"),n("2877")),d=Object(l["a"])(h,a,o,!1,null,null,null),u=d.exports,f={name:"App",components:{ChessBoard:u},data:function(){return{name:"test"}}},p=f,v=Object(l["a"])(p,i,r,!1,null,null,null),y=v.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(y)}}).$mount("#app")},ff13:function(t,e,n){"use strict";var s=n("0ce2"),i=n.n(s);i.a}});
//# sourceMappingURL=app.582a9450.js.map