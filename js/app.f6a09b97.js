(function(t){function e(e){for(var n,r,o=e[0],c=e[1],h=e[2],d=0,u=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(u.length)u.shift()();return a.push.apply(a,h||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],n=!0,o=1;o<s.length;o++){var c=s[o];0!==i[c]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=s[0]))}return t}var n={},i={app:0},a=[];function r(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=n,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(s,n,function(e){return t[e]}.bind(null,n));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var h=0;h<o.length;h++)e(o[h]);var l=c;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"13ee":function(t,e,s){"use strict";var n=s("906c"),i=s.n(n);i.a},"14eb":function(t,e,s){"use strict";var n=s("be78"),i=s.n(n);i.a},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("chessboard")],1)},a=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chessboard"},[s("div",{staticClass:"title"},[t._v("-- 五子棋 "+t._s(t.verson)+" --")]),s("div",{staticClass:"tips"},[t._v(t._s(t.tips))]),s("div",{staticClass:"content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isCanvas,expression:"isCanvas"}]},[s("canvas-verson",{ref:"canvasVer",attrs:{chessboardStyle:t.chessboardStyle,chessmanStyle:t.chessmanStyle,gameOver:t.gameOver},on:{listenDropChessman:t.listenDropChessman}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isCanvas,expression:"!isCanvas"}]},[s("dom-verson",{ref:"domVer",attrs:{chessboardStyle:t.chessboardStyle,chessmanStyle:t.chessmanStyle,gameOver:t.gameOver},on:{listenDropChessman:t.listenDropChessman}})],1),s("div",{staticClass:"aside"},[s("div",{on:{click:t.reStart}},[t._v("重新开始")]),s("div",{attrs:{disabled:""},on:{click:t.unDo}},[t._v("悔棋")]),s("div",{on:{click:t.cancelUndo}},[t._v("撤销悔棋")]),s("div",{on:{click:t.toggleVer}},[t._v("切换版本")])])])])},o=[],c=(s("4160"),s("d81d"),s("45fc"),s("159b"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dom_verson",style:t.domVersonStyle},[t._l(t.horizontalList,(function(t){return s("div",{key:t.id,staticClass:"horizontal_line",style:t.style})})),t._l(t.verticalList,(function(t){return s("div",{key:t.id,staticClass:"vertical_line",style:t.style})})),s("div",{staticClass:"chessmanList"},t._l(t.chessmanList,(function(t){return s("div",{key:t.id,staticClass:"chessman",style:t.style})})),0),s("div",{staticClass:"mask",style:t.maskStyle,on:{click:function(e){!t.gameOver&&t.listenDropChessman(e)}}})],2)}),h=[],l=(s("99af"),{name:"DomVerson",props:{chessboardStyle:{type:Object,required:!0},chessmanStyle:{type:Object,required:!0},gameOver:{type:Boolean,required:!0}},data:function(){return{domVersonStyle:null,maskStyle:null,horizontalList:[],verticalList:[],chessmanList:[]}},methods:{drawChessboard:function(){var t=this.chessboardStyle,e=t.count,s=t.padding,n=t.color;this.domVersonStyle={width:(e+1)*s+"px",height:(e+1)*s+"px"},this.maskStyle={width:(e+1)*s+"px",height:(e+1)*s+"px",top:0,left:0};for(var i=0;i<e;i++)this.horizontalList.push({id:"hor_".concat(i),style:{width:(e-1)*s+"px",top:(i+1)*s+"px",left:s+"px",borderTop:"1px ".concat(n," solid")}}),this.verticalList.push({id:"ver_".concat(i),style:{height:(e-1)*s+"px",top:s+"px",left:(i+1)*s+"px",borderLeft:"1px ".concat(n," solid")}})},drawChessman:function(t,e,s){var n=this.chessboardStyle.padding,i=this.chessmanStyle,a=i.radius,r=i.blackColor,o=i.whiteColor;return this.chessmanList.push({id:"".concat(t,"_").concat(e),style:{width:2*a+"px",height:2*a+"px",left:(t+1)*n-a+"px",top:(e+1)*n-a+"px",backgroundColor:"blackColor"===s?r:o}}),{x:t,y:e}},listenDropChessman:function(t){this.$emit("listenDropChessman",t,this.drawChessman)},reset:function(){this.chessmanList=[]},unDo:function(t){this.chessmanList.pop()}},created:function(){this.drawChessboard()}}),d=l,u=(s("14eb"),s("2877")),p=Object(u["a"])(d,c,h,!1,null,"037c24bb",null),v=p.exports,f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"canvas_verson"},[s("canvas",{ref:"canvas",on:{click:function(e){!t.gameOver&&t.listenDropChessman(e)}}},[s("p",[t._v("您的浏览器版本过低，请升级您的浏览器")])])])},m=[],y=(s("cb29"),{name:"CanvasVerson",props:{chessboardStyle:{type:Object,required:!0},chessmanStyle:{type:Object,required:!0},gameOver:{type:Boolean,required:!0}},data:function(){return{canvas:null,ctx:null}},computed:{},methods:{initCanvas:function(){this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d")},drawLine:function(t,e,s){t.moveTo(e.x+.5,e.y+.5),t.lineTo(s.x+.5,s.y+.5)},drawChessboard:function(){var t=this.chessboardStyle,e=t.count,s=t.padding,n=t.color,i=this.canvas,a=this.ctx;i.width=i.height=s*(e+1),a.save(),a.strokeStyle=n,a.beginPath();for(var r=0;r<e;r++){var o=r+1;this.drawLine(a,{x:o*s,y:s},{x:o*s,y:e*s}),this.drawLine(a,{x:s,y:o*s},{x:e*s,y:o*s})}a.stroke(),a.restore()},drawChessman:function(t,e,s){var n=this.ctx,i=this.chessboardStyle.padding,a=this.chessmanStyle,r=a.radius,o=a.whiteColor,c=a.blackColor;return n.save(),n.fillStyle="blackColor"===s?c:o,n.beginPath(),n.arc((t+1)*i+.5,(e+1)*i+.5,r,0,2*Math.PI),n.stroke(),n.fill(),n.restore(),{x:t,y:e}},listenDropChessman:function(t){this.$emit("listenDropChessman",t,this.drawChessman)},reset:function(){var t=this.canvas,e=this.ctx;e.clearRect(0,0,t.width,t.height),this.drawChessboard()},unDo:function(t){var e=this.chessboardStyle,s=e.count,n=e.padding,i=e.color,a=this.ctx,r=t.x,o=t.y,c=(r+1)*n,h=(o+1)*n;a.clearRect((r+.5)*n+.5,(o+.5)*n+.5,n,n),a.save(),a.strokeStyle=i,a.beginPath(),0!==o&&this.drawLine(a,{x:c,y:h},{x:c,y:h-.6*n}),o!==s-1&&this.drawLine(a,{x:c,y:h},{x:c,y:h+.6*n}),0!==r&&this.drawLine(a,{x:c,y:h},{x:c-.6*n,y:h}),r!==s-1&&this.drawLine(a,{x:c,y:h},{x:c+.6*n,y:h}),a.stroke(),a.restore()}},mounted:function(){this.initCanvas(),this.drawChessboard()}}),b=y,C=(s("e643"),Object(u["a"])(b,f,m,!1,null,"7d11882c",null)),x=C.exports,S={name:"Chessboard",components:{DomVerson:v,CanvasVerson:x},data:function(){return{chessboardStyle:{count:16,padding:40,color:"#333"},chessboardMatrix:[],isBlack:!0,tips:"黑方的回合",preStep:null,canUndo:!1,gameOver:!1,isCanvas:!1}},watch:{isBlack:function(t){this.tips=!0===t?"黑方的回合":"白方的回合"}},computed:{verson:function(){return this.isCanvas?"Canvas版":"Dom版"},chessmanStyle:function(){return{radius:.4*this.chessboardStyle.padding,blackColor:"#000",whiteColor:"#E3E3E3"}}},methods:{initChessboardMatrix:function(){for(var t=this.chessboardStyle.count,e=this.chessboardMatrix,s=0;s<t;s++){e[s]=[];for(var n=0;n<t;n++)e[s][n]=0}},listenDropChessman:function(t,e){var s=this.isBlack,n=this.chessboardStyle,i=n.padding,a=n.count,r=t.offsetX,o=t.offsetY;if(r=Math.round(r/i)-1,o=Math.round(o/i)-1,r+1!==0&&r!==a&&o+1!==0&&o!==a&&0==this.chessboardMatrix[r][o]){if(this.preStep=e(r,o,s?"blackColor":"whiteColor"),this.chessboardMatrix[r][o]=s?1:2,this.isWin(r,o)>0)return this.tips=s?"！！！ 黑方获胜 ！！！":"！！！ 白方获胜 ！！！",void(this.gameOver=!0);this.canUndo=!0,this.isBlack=!s}},isWin:function(t,e){var s=this.chessboardMatrix,n=(this.chessboardStyle.count,s.map((function(t){return t[e]}))),i=s[t],a=[],r=[],o=0;return s.forEach((function(s,n){var i=s[e-(t-n)];void 0!==i&&a.push(i);var o=s[e+(t-n)];void 0!==o&&r.push(o)})),[n,i,a,r].forEach((function(t){var e=t.some((function(e,s){if(0!==e&&t[s+1]===e&&t[s+2]===e&&t[s+3]===e&&t[s+4]===e)return!0}));e&&o++})),o},reStart:function(){var t=this.isCanvas?"canvasVer":"domVer";this.$refs[t].reset(),this.initChessboardMatrix(),this.isBlack=!0,this.preStep=null,this.gameOver=!1,this.tips="黑方的回合"},unDo:function(){var t=this.preStep,e=this.chessboardMatrix,s=this.canUndo,n=this.gameOver,i=this.chessboardStyle,a=(i.count,i.padding,i.color,this.preStep),r=a.x,o=a.y,c=this.isCanvas?"canvasVer":"domVer";t&&(n||s&&(e[r][o]=0,this.isBlack=!this.isBlack,this.canUndo=!1,this.$refs[c].unDo(t)))},cancelUndo:function(){var t=this.chessboardMatrix,e=this.isBlack,s=this.gameOver,n=this.canUndo,i=this.preStep,a=this.preStep,r=a.x,o=a.y,c=this.isCanvas?"canvasVer":"domVer";i&&(s||n||(this.canUndo=!0,this.preStep=this.$refs[c].drawChessman(r,o,e?"blackColor":"whiteColor"),this.isBlack=!this.isBlack,t[r][o]=e?1:2))},toggleVer:function(){this.reStart(),this.isCanvas=!this.isCanvas}},created:function(){this.initChessboardMatrix()}},g=S,w=(s("13ee"),Object(u["a"])(g,r,o,!1,null,null,null)),k=w.exports,_={name:"App",components:{Chessboard:k},data:function(){return{name:"test"}}},O=_,L=Object(u["a"])(O,i,a,!1,null,null,null),D=L.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(D)}}).$mount("#app")},"906c":function(t,e,s){},be78:function(t,e,s){},e643:function(t,e,s){"use strict";var n=s("f801"),i=s.n(n);i.a},f801:function(t,e,s){}});
//# sourceMappingURL=app.f6a09b97.js.map